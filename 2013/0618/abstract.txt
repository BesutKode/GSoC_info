The on the fly indentation in Xamarin Studio needs a rewrite. The current implementation is a bit flaky and doesn't respect many formatting rules. The engine should respect all formatting settings and give the user a good typing flow. The engine should format code while typed as sell as possible. There is already an implementation for that but it needs more work. The goal is to implement a really good indentation engine that is fast and scales, which is not that simple.