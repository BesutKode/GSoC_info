Handling of subprocess async io issues, testing and reimplementing the commands module in terms of subprocess.